syntax = "proto3";
package wrapper;
option go_package = "/gen";

service CompressionService {
  rpc GetCompression(GetCompressionRequest) returns (GetCompressionResponse);
}
message GetCompressionRequest {
  string videolink = 1;
  string duration = 2;
}
message GetCompressionResponse {
  string path = 1;
}

message Tags {
  string compatible_brands = 1;
  string encoder = 2;
  string major_brand = 3;
  string minor_version = 4;
}

message Metadata {
  string filename = 1;
  int64 nb_streams = 2;
  int64 nb_programs = 3;
  string format_name = 4;
  string format_long_name = 5;
  string start_time = 6;
  string duration = 7;
  string size = 8;
  string bit_rate = 9;
  int64 probe_score = 10;
  Tags tags = 11;
}

service MetadataService {
  rpc GetMetadata(GetMetadataRequest) returns (GetMetadataResponse);
}
message GetMetadataRequest {
  string path = 1;
}
message GetMetadataResponse {
  Metadata metadata = 1;
}

service VideoService {
  rpc GetVideoDetails(GetVideoDetailsRequest) returns (GetVideoDetailsResponse);
}

message GetVideoDetailsRequest {
  string path = 1;
}
message GetVideoDetailsResponse {
  string link = 1;
  Metadata oldMetadata = 2;
}
